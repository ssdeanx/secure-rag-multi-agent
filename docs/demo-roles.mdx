import {
    Badge,
    Button,
    Card,
    CardContent,
    CardDescription,
    CardHeader,
    CardTitle,
    Alert,
    AlertDescription,
    AlertTitle,
    Tabs,
    TabsContent,
    TabsList,
    TabsTrigger,
    Mermaid,
    Users,
    Shield,
    Eye,
    EyeOff,
    Lock,
    CheckCircle,
    Play,
    FileText,
    ArrowRight,
    Typography,
    Box,
    Terminal,
} from '@/components/docs/mdx-bridge.joy'

# Demo Roles & Access Control

This page demonstrates role-based access control in the Mastra Governed RAG system using sample queries against the corpus documents. Use the UI's AuthPanel or `scripts/make-jwt.js` to generate JWTs for testing different access scenarios.

<Alert className="mb-6">
    <Users className="h-4 w-4" />
    <AlertTitle>Interactive Role Testing</AlertTitle>
    <AlertDescription>
        Try different roles to see how the system enforces access control and
        provides appropriate responses based on user permissions.
    </AlertDescription>
</Alert>

<!-- toc -->

## Role Hierarchy Overview

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)', lg: 'repeat(3, 1fr)' }, gap: 3, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
      <CardTitle sx={{ fontSize: '1.125rem', display: 'flex', alignItems: 'center', gap: 1 }}>
        <Eye sx={{ fontSize: 20, color: 'success.main' }} />
        Public (Level 10)
      </CardTitle>
      <CardDescription>Unauthenticated users</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1, fontSize: '0.875rem' }}>
        <div><strong>Max Classification:</strong> public</div>
        <div><strong>Allowed Tags:</strong> None</div>
        <div><strong>Access:</strong> No sensitive content</div>
      </Box>
    </CardContent>
  </Card>

<Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
        <CardTitle
            sx={{
                fontSize: '1.125rem',
                display: 'flex',
                alignItems: 'center',
                gap: 1,
            }}
        >
            <Users sx={{ fontSize: 20, color: 'primary.main' }} />
            Employee (Level 40)
        </CardTitle>
        <CardDescription>General staff access</CardDescription>
    </CardHeader>
    <CardContent>
        <Box
            sx={{
                display: 'flex',
                flexDirection: 'column',
                gap: 1,
                fontSize: '0.875rem',
            }}
        >
            <div>
                <strong>Max Classification:</strong> internal
            </div>
            <div>
                <strong>Allowed Tags:</strong> General
            </div>
            <div>
                <strong>Access:</strong> Internal policies
            </div>
        </Box>
    </CardContent>
</Card>

<Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
        <CardTitle
            sx={{
                fontSize: '1.125rem',
                display: 'flex',
                alignItems: 'center',
                gap: 1,
            }}
        >
            <Shield sx={{ fontSize: 20, color: 'warning.main' }} />
            Department Viewer (Level 60)
        </CardTitle>
        <CardDescription>Department-specific read access</CardDescription>
    </CardHeader>
    <CardContent>
        <Box
            sx={{
                display: 'flex',
                flexDirection: 'column',
                gap: 1,
                fontSize: '0.875rem',
            }}
        >
            <div>
                <strong>Max Classification:</strong> internal
            </div>
            <div>
                <strong>Allowed Tags:</strong> Department-specific
            </div>
            <div>
                <strong>Access:</strong> Dept docs + general
            </div>
        </Box>
    </CardContent>
</Card>

<Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
        <CardTitle
            sx={{
                fontSize: '1.125rem',
                display: 'flex',
                alignItems: 'center',
                gap: 1,
            }}
        >
            <Lock sx={{ fontSize: 20, color: 'secondary.main' }} />
            Department Admin (Level 80)
        </CardTitle>
        <CardDescription>Full department control</CardDescription>
    </CardHeader>
    <CardContent>
        <Box
            sx={{
                display: 'flex',
                flexDirection: 'column',
                gap: 1,
                fontSize: '0.875rem',
            }}
        >
            <div>
                <strong>Max Classification:</strong> confidential
            </div>
            <div>
                <strong>Allowed Tags:</strong> Department + confidential
            </div>
            <div>
                <strong>Access:</strong> All dept content
            </div>
        </Box>
    </CardContent>
</Card>

  <Card variant="outlined" sx={{ gridColumn: { md: 'span 2', lg: 'span 1' } }}>
    <CardHeader sx={{ pb: 1.5 }}>
      <CardTitle sx={{ fontSize: '1.125rem', display: 'flex', alignItems: 'center', gap: 1 }}>
        <CheckCircle sx={{ fontSize: 20, color: 'error.main' }} />
        Super Admin (Level 100)
      </CardTitle>
      <CardDescription>Complete system access</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1, fontSize: '0.875rem' }}>
        <div><strong>Max Classification:</strong> confidential</div>
        <div><strong>Allowed Tags:</strong> All departments</div>
        <div><strong>Access:</strong> Complete system access</div>
      </Box>
    </CardContent>
  </Card>
</Box>

## Interactive Role Testing

<Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1, mb: 3 }}>
  <Mermaid
    chart={`flowchart TD
A[User Query] --> B{JWT Authentication}
B -->|Valid| C[Extract Role & Permissions]
B -->|Invalid| D[Access Denied]
C --> E{Classification Check}
E -->|Public| F[Allow Public Docs]
E -->|Internal| G{Role Level Check}
E -->|Confidential| H{Admin Check}
G -->|Employee+| I[Allow Internal Docs]
G -->|Insufficient| J[Filter Results]
H -->|Admin| K[Allow Confidential Docs]
H -->|Not Admin| L[Block Access]
F --> M[Return Filtered Results]
I --> M
K --> M
J --> M
L --> M
D --> N[Error Response]
style A fill:#e3f2fd
style C fill:#f3e5f5
style M fill:#e8f5e8
style N fill:#ffebee`}
/>

  <Typography level="body-sm" sx={{ color: 'text.tertiary', mt: 2 }}>
    <strong>Access Control Flow:</strong> Each query goes through multi-stage security checks before returning results.
  </Typography>
</Box>

<Tabs defaultValue="public" sx={{ mb: 3 }}>
  <TabsList sx={{ gridTemplateColumns: 'repeat(5, 1fr)' }}>
    <TabsTrigger value="public">Public</TabsTrigger>
    <TabsTrigger value="employee">Employee</TabsTrigger>
    <TabsTrigger value="finance">Finance Viewer</TabsTrigger>
    <TabsTrigger value="hr">HR Admin</TabsTrigger>
    <TabsTrigger value="admin">Super Admin</TabsTrigger>
  </TabsList>

  <TabsContent value="public">
    <Card variant="outlined">
      <CardHeader>
        <CardTitle sx={{ fontSize: '1.125rem' }}>Public User Access</CardTitle>
        <CardDescription>Minimal access - no sensitive information</CardDescription>
      </CardHeader>
      <CardContent>
        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>
          <Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Sample Query: "What is the expense reimbursement policy?"</Typography>
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1, color: 'error.main' }}>
              <EyeOff sx={{ fontSize: 16 }} />
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Expected Response:</Typography>
            </Box>
            <Box sx={{ bgcolor: 'error.softBg', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              "No authorized documents found that contain information about this topic."
            </Box>
            <Typography level="body-sm" sx={{ color: 'text.tertiary', mt: 1 }}>
              <strong>Reason:</strong> All corpus documents are classified as internal or confidential, which public users cannot access.
            </Typography>
          </Box>
          <Box sx={{ display: 'grid', gridTemplateColumns: { xs: 'repeat(1, 1fr)', md: 'repeat(3, 1fr)' }, gap: 2 }}>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'error.softBg',
                color: 'error.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <EyeOff sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Finance Policy</Typography>
              <Badge variant="soft" color="secondary" sx={{ fontSize: '0.75rem' }}>Internal</Badge>
            </Box>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'error.softBg',
                color: 'error.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <EyeOff sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Engineering Handbook</Typography>
              <Badge variant="soft" color="secondary" sx={{ fontSize: '0.75rem' }}>Internal</Badge>
            </Box>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'error.softBg',
                color: 'error.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <EyeOff sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>HR Confidential</Typography>
              <Badge variant="soft" color="danger" sx={{ fontSize: '0.75rem' }}>Confidential</Badge>
            </Box>
          </Box>
        </Box>
      </CardContent>
    </Card>

  </TabsContent>

  <TabsContent value="employee">
    <Card variant="outlined">
      <CardHeader>
        <CardTitle sx={{ fontSize: '1.125rem' }}>Employee Access</CardTitle>
        <CardDescription>General internal access with department restrictions</CardDescription>
      </CardHeader>
      <CardContent>
        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>
          <Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Sample Query: "What is the engineering code review process?"</Typography>
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1, color: 'success.main' }}>
              <CheckCircle sx={{ fontSize: 16 }} />
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Expected Response:</Typography>
            </Box>
            <Box sx={{ bgcolor: 'success.softBg', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              "All code must be peer-reviewed... Minimum 2 approvals for production code."
            </Box>
            <Typography level="body-sm" sx={{ color: 'text.tertiary', mt: 1 }}>
              <strong>Citations:</strong> <Typography component="code" sx={{ fontSize: '0.75rem' }}>[{"docId": "engineering-handbook-001", "source": "Engineering Team Handbook"}]</Typography>
            </Typography>
          </Box>
          <Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Sample Query: "What is executive compensation?"</Typography>
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1, color: 'error.main' }}>
              <EyeOff sx={{ fontSize: 16 }} />
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Expected Response:</Typography>
            </Box>
            <Box sx={{ bgcolor: 'error.softBg', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              "No authorized documents found..."
            </Box>
            <Typography level="body-sm" sx={{ color: 'text.tertiary', mt: 1 }}>
              <strong>Reason:</strong> HR confidential documents require specific department admin access.
            </Typography>
          </Box>
          <Box sx={{ display: 'grid', gridTemplateColumns: { xs: 'repeat(1, 1fr)', md: 'repeat(3, 1fr)' }, gap: 2 }}>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'warning.softBg',
                color: 'warning.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <Eye sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Finance Policy</Typography>
              <Badge variant="soft" color="secondary" sx={{ fontSize: '0.75rem' }}>Internal</Badge>
            </Box>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'success.softBg',
                color: 'success.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <CheckCircle sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Engineering Handbook</Typography>
              <Badge variant="soft" color="secondary" sx={{ fontSize: '0.75rem' }}>Internal</Badge>
            </Box>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'error.softBg',
                color: 'error.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <EyeOff sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>HR Confidential</Typography>
              <Badge variant="soft" color="danger" sx={{ fontSize: '0.75rem' }}>Confidential</Badge>
            </Box>
          </Box>
        </Box>
      </CardContent>
    </Card>

  </TabsContent>

  <TabsContent value="finance">
    <Card variant="outlined">
      <CardHeader>
        <CardTitle sx={{ fontSize: '1.125rem' }}>Finance Viewer Access</CardTitle>
        <CardDescription>Finance-specific access with inheritance</CardDescription>
      </CardHeader>
      <CardContent>
        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>
          <Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Sample Query: "What are the approval thresholds for expenses?"</Typography>
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1, color: 'success.main' }}>
              <CheckCircle sx={{ fontSize: 16 }} />
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Expected Response:</Typography>
            </Box>
            <Box sx={{ bgcolor: 'success.softBg', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              "Expenses under $500: Direct manager... over $1000: CFO approval..."
            </Box>
            <Typography level="body-sm" sx={{ color: 'text.tertiary', mt: 1 }}>
              <strong>Citations:</strong> <Typography component="code" sx={{ fontSize: '0.75rem' }}>[{"docId": "finance-policy-001", "source": "Finance Department Policy Manual"}]</Typography>
            </Typography>
          </Box>
          <Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Sample Query: "What is the engineering on-call schedule?"</Typography>
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1, color: 'success.main' }}>
              <CheckCircle sx={{ fontSize: 16 }} />
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Expected Response:</Typography>
            </Box>
            <Box sx={{ bgcolor: 'success.softBg', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              "Weekly rotations starting Monday 9 AM... Compensation: $500/week..."
            </Box>
            <Typography level="body-sm" sx={{ color: 'text.tertiary', mt: 1 }}>
              <strong>Access via inheritance:</strong> Employee-level access to engineering documents.
            </Typography>
          </Box>
          <Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Sample Query: "Executive severance packages?"</Typography>
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1, color: 'error.main' }}>
              <EyeOff sx={{ fontSize: 16 }} />
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Expected Response:</Typography>
            </Box>
            <Box sx={{ bgcolor: 'error.softBg', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              "No authorized documents found..."
            </Box>
            <Typography level="body-sm" sx={{ color: 'text.tertiary', mt: 1 }}>
              <strong>Reason:</strong> Confidential HR documents require HR admin access, not finance viewer.
            </Typography>
          </Box>
          <Box sx={{ display: 'grid', gridTemplateColumns: { xs: 'repeat(1, 1fr)', md: 'repeat(3, 1fr)' }, gap: 2 }}>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'success.softBg',
                color: 'success.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <CheckCircle sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Finance Policy</Typography>
              <Badge variant="soft" color="secondary" sx={{ fontSize: '0.75rem' }}>Internal</Badge>
            </Box>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'success.softBg',
                color: 'success.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <CheckCircle sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Engineering Handbook</Typography>
              <Badge variant="soft" color="secondary" sx={{ fontSize: '0.75rem' }}>Internal</Badge>
            </Box>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'error.softBg',
                color: 'error.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <EyeOff sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>HR Confidential</Typography>
              <Badge variant="soft" color="danger" sx={{ fontSize: '0.75rem' }}>Confidential</Badge>
            </Box>
          </Box>
        </Box>
      </CardContent>
    </Card>

  </TabsContent>

  <TabsContent value="hr">
    <Card variant="outlined">
      <CardHeader>
        <CardTitle sx={{ fontSize: '1.125rem' }}>HR Admin Access</CardTitle>
        <CardDescription>Full HR access including confidential documents</CardDescription>
      </CardHeader>
      <CardContent>
        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>
          <Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Sample Query: "What are the executive compensation bands?"</Typography>
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1, color: 'success.main' }}>
              <CheckCircle sx={{ fontSize: 16 }} />
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Expected Response:</Typography>
            </Box>
            <Box sx={{ bgcolor: 'success.softBg', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              "CEO: Base $850,000... C-Suite: $450k-$550k base..."
            </Box>
            <Typography level="body-sm" sx={{ color: 'text.tertiary', mt: 1 }}>
              <strong>Citations:</strong> <Typography component="code" sx={{ fontSize: '0.75rem' }}>[{"docId": "hr-conf-001", "source": "HR Confidential Documents"}]</Typography>
            </Typography>
          </Box>
          <Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Sample Query: "Finance budget overrun policy?"</Typography>
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1, color: 'success.main' }}>
              <CheckCircle sx={{ fontSize: 16 }} />
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Expected Response:</Typography>
            </Box>
            <Box sx={{ bgcolor: 'success.softBg', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              "Any projected overrun exceeding 10% must be reported..."
            </Box>
            <Typography level="body-sm" sx={{ color: 'text.tertiary', mt: 1 }}>
              <strong>Access via inheritance:</strong> Employee-level access to finance documents.
            </Typography>
          </Box>
          <Box sx={{ display: 'grid', gridTemplateColumns: { xs: 'repeat(1, 1fr)', md: 'repeat(3, 1fr)' }, gap: 2 }}>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'success.softBg',
                color: 'success.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <CheckCircle sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Finance Policy</Typography>
              <Badge variant="soft" color="secondary" sx={{ fontSize: '0.75rem' }}>Internal</Badge>
            </Box>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'success.softBg',
                color: 'success.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <CheckCircle sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Engineering Handbook</Typography>
              <Badge variant="soft" color="secondary" sx={{ fontSize: '0.75rem' }}>Internal</Badge>
            </Box>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'success.softBg',
                color: 'success.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <CheckCircle sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>HR Confidential</Typography>
              <Badge variant="soft" color="danger" sx={{ fontSize: '0.75rem' }}>Confidential</Badge>
            </Box>
          </Box>
        </Box>
      </CardContent>
    </Card>

  </TabsContent>

  <TabsContent value="admin">
    <Card variant="outlined">
      <CardHeader>
        <CardTitle sx={{ fontSize: '1.125rem' }}>Super Admin Access</CardTitle>
        <CardDescription>Complete system access to all documents</CardDescription>
      </CardHeader>
      <CardContent>
        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>
          <Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Sample Query: Any question about any document</Typography>
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1, color: 'success.main' }}>
              <CheckCircle sx={{ fontSize: 16 }} />
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Expected Response:</Typography>
            </Box>
            <Box sx={{ bgcolor: 'success.softBg', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              Full access to all documents with complete, accurate answers and comprehensive citations from all relevant sources.
            </Box>
            <Typography level="body-sm" sx={{ color: 'text.tertiary', mt: 1 }}>
              <strong>Admin privileges:</strong> Access to all classifications and security tags across all departments.
            </Typography>
          </Box>
          <Box sx={{ display: 'grid', gridTemplateColumns: { xs: 'repeat(1, 1fr)', md: 'repeat(3, 1fr)' }, gap: 2 }}>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'success.softBg',
                color: 'success.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <CheckCircle sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Finance Policy</Typography>
              <Badge variant="soft" color="secondary" sx={{ fontSize: '0.75rem' }}>Internal</Badge>
            </Box>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'success.softBg',
                color: 'success.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <CheckCircle sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>Engineering Handbook</Typography>
              <Badge variant="soft" color="secondary" sx={{ fontSize: '0.75rem' }}>Internal</Badge>
            </Box>
            <Box sx={{ textAlign: 'center' }}>
              <Box sx={{
                bgcolor: 'success.softBg',
                color: 'success.main',
                borderRadius: '50%',
                width: 48,
                height: 48,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                mb: 1,
                mx: 'auto'
              }}>
                <CheckCircle sx={{ fontSize: 24 }} />
              </Box>
              <Typography level="body-sm" sx={{ fontWeight: 'bold' }}>HR Confidential</Typography>
              <Badge variant="soft" color="danger" sx={{ fontSize: '0.75rem' }}>Confidential</Badge>
            </Box>
          </Box>
        </Box>
      </CardContent>
    </Card>

  </TabsContent>
</Tabs>

## Testing Methods

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
        <Play sx={{ fontSize: 20 }} />
        UI Testing
      </CardTitle>
      <CardDescription>Interactive testing through the web interface</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1.5, fontSize: '0.875rem' }}>
        <div><strong>1. Open Application:</strong> Navigate to <Typography component="a" href="http://localhost:3000" sx={{ color: 'primary.main', textDecoration: 'none', '&:hover': { textDecoration: 'underline' } }}>http://localhost:3000</Typography></div>
        <div><strong>2. Authenticate:</strong> Use the AuthPanel to select a role and generate a JWT</div>
        <div><strong>3. Test Queries:</strong> Ask questions in the chat interface</div>
        <div><strong>4. Observe Results:</strong> Watch streaming responses and citations</div>
      </Box>
    </CardContent>
  </Card>

  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
        <Terminal sx={{ fontSize: 20 }} />
        CLI Testing
      </CardTitle>
      <CardDescription>Command-line testing for automation</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1, fontSize: '0.875rem', fontFamily: 'monospace', mb: 1 }}>
        npm run cli query "JWT_TOKEN" "Your question here"
      </Box>
      <Typography level="body-sm" sx={{ color: 'text.tertiary', mb: 1 }}>
        Replace JWT_TOKEN with a token generated for the desired role
      </Typography>
      <div><strong>Output:</strong> Answer with citations logged to console</div>
    </CardContent>
  </Card>
</Box>

## Expected Behaviors

<Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mb: 3 }}>
  <Alert color="success">
    <CheckCircle sx={{ fontSize: 16 }} />
    <AlertTitle>Authorized Access</AlertTitle>
    <AlertDescription>
      When users have appropriate permissions, they receive accurate answers with proper source citations from accessible documents.
    </AlertDescription>
  </Alert>

<Alert color="danger">
    <EyeOff sx={{ fontSize: 16 }} />
    <AlertTitle>Unauthorized Access</AlertTitle>
    <AlertDescription>
        When users lack permissions, they receive polite denials with "No
        authorized documents found" messages, preventing information leakage.
    </AlertDescription>
</Alert>

  <Alert color="warning">
    <Shield sx={{ fontSize: 16 }} />
    <AlertTitle>Security Verification</AlertTitle>
    <AlertDescription>
      All responses go through verification to ensure compliance with security policies and prevent unauthorized information disclosure.
    </AlertDescription>
  </Alert>
</Box>

<Box sx={{ display: 'flex', gap: 2 }}>
    <Button
        component="a"
        href="/docs/security"
        startDecorator={<Shield sx={{ fontSize: 16 }} />}
    >
        Security Guide
        <ArrowRight sx={{ fontSize: 16, ml: 1 }} />
    </Button>
    <Button
        variant="outlined"
        component="a"
        href="/docs/api-reference"
        startDecorator={<FileText sx={{ fontSize: 16 }} />}
    >
        API Reference
    </Button>
</Box>
