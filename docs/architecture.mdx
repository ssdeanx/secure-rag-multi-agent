---
title: Multi-Domain AI Orchestration Platform
summary: This document outlines the architecture of the Mastra Multi-Domain AI Orchestration Platform.
versionId: 1.0.0
created: 2025-10-22
updated: 2025-10-22
tags: [multi-domain, ai, orchestration, platform, architecture, mastra, nextjs, cedar, design, security, compliance, compliance-as-code, security-as-code, infrastructure-as-code]
metadata:
  layout: docs, sidebar: true, toc: true, sidebarDepth: 2, search: true, searchMaxSuggestions: 10, draft: false
---

import {
    Badge,
    Button,
    Card,
    CardContent,
    CardDescription,
    CardHeader,
    CardTitle,
    Alert,
    AlertDescription,
    AlertTitle,
    Tabs,
    TabsContent,
    TabsList,
    TabsTrigger,
    Mermaid,
    Layers,
    Database,
    Brain,
    Shield,
    Settings,
    ArrowRight,
    Zap,
    FileText,
    Users,
    CheckCircle,
    Typography,
    Box,
} from '@/components/docs/mdx-bridge.joy'

# System Architecture

The Multi-Domain AI Orchestration Platform is built around Mastra's multi-agent orchestration framework, integrating Next.js for the frontend/API, PostgreSQL with PgVector for vector storage, and Google Gemini for embeddings/LLM. The core logic resides in `src/mastra/`, with workflows coordinating 27 specialized agents across 5 capability domains for comprehensive AI orchestration.

<Alert className="mb-6">
    <Layers className="h-4 w-4" />
    <AlertTitle>Multi-Agent Architecture</AlertTitle>
    <AlertDescription>
        Specialized AI agents work together in orchestrated workflows across 5 domains:
        Governed RAG, Deep Research, Financial Intelligence, Content Generation, and Interactive State Management.
    </AlertDescription>
</Alert>

<!-- toc -->

## High-Level Components

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)', lg: 'repeat(4, 1fr)' }, gap: 2, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1, fontSize: '1rem' }}>
        <Zap sx={{ fontSize: 20, color: 'primary.main' }} />
        Frontend (Next.js)
      </CardTitle>
    </CardHeader>
    <CardContent>
      <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5 } }}>
        <li>• Chat interface</li>
        <li>• Authentication panel</li>
        <li>• Document indexing UI</li>
        <li>• API routes (/api/chat, /api/index)</li>
      </Box>
    </CardContent>
  </Card>

<Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
        <CardTitle
            sx={{
                display: 'flex',
                alignItems: 'center',
                gap: 1,
                fontSize: '1rem',
            }}
        >
            <Brain sx={{ fontSize: 20, color: 'secondary.main' }} />
            Backend (Mastra)
        </CardTitle>
    </CardHeader>
    <CardContent>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5 } }}>
            <li>• Agent orchestration</li>
            <li>• Workflow management</li>
            <li>• Security enforcement</li>
            <li>• Business logic services</li>
        </Box>
    </CardContent>
</Card>

<Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
        <CardTitle
            sx={{
                display: 'flex',
                alignItems: 'center',
                gap: 1,
                fontSize: '1rem',
            }}
        >
            <Database sx={{ fontSize: 20, color: 'success.main' }} />
            Storage Layer
        </CardTitle>
    </CardHeader>
    <CardContent>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5 } }}>
            <li>• PostgreSQL with PgVector</li>
            <li>• PostgreSQL metadata store</li>
            <li>• Security payloads</li>
            <li>• Audit logging</li>
        </Box>
    </CardContent>
</Card>

  <Card variant="outlined">
    <CardHeader sx={{ pb: 1.5 }}>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1, fontSize: '1rem' }}>
        <Settings sx={{ fontSize: 20, color: 'warning.main' }} />
        CLI Tools
      </CardTitle>
    </CardHeader>
    <CardContent>
      <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5 } }}>
        <li>• Document indexing</li>
        <li>• Query testing</li>
        <li>• Demo scenarios</li>
        <li>• System management</li>
      </Box>
    </CardContent>
  </Card>
</Box>

## System Architecture Overview

<Box sx={{ bgcolor: 'background.surface', p: 3, borderRadius: 1, mb: 3 }}>

```mermaid
graph TB
  subgraph "Frontend Layer"
      A[Next.js App]
      B[Chat Interface]
      C[Auth Panel]
      D[Admin UI]
  end

  subgraph "API Layer"
      E[Next.js API Routes]
      F[/api/chat]
      G[/api/index]
      H[/api/auth]
  end

  subgraph "Mastra Orchestration"
      I[Mastra Server]
      J[Agent Manager]
      K[Workflow Engine]
      L[Security Enforcer]
  end

  subgraph "Agent Layer"
      M[Identity Agent]
      N[Policy Agent]
      O[Retrieve Agent]
      P[Rerank Agent]
      Q[Answerer Agent]
      R[Verifier Agent]
      S[Research Agent]
      T[Copywriter Agent]
      U[Financial Agents]
  end

  subgraph "Storage Layer"
      Q[(PgVector Vectors)]
      R[(PostgreSQL Metadata)]
      S[(Security Store)]
  end

  subgraph "External Services"
      T[Google Gemini API]
      U[Auth Provider]
      V[Audit Logger]
  end

  A --> E
  B --> F
  C --> H
  D --> G
  E --> I
  I --> J
  J --> K
  K --> L
  L --> M
  L --> N
  L --> O
  L --> P
  L --> Q
  L --> R
  L --> S
  L --> T
  L --> U
  M --> Q
  N --> R
  O --> S
  P --> T
  I --> U
  L --> V

  style A fill:#e3f2fd
  style I fill:#fff3e0
  style M fill:#f3e5f5
  style Q fill:#e8f5e8
```

</Box>

## Core Directory Structure

<Card variant="outlined" sx={{ mb: 3 }}>
  <CardHeader>
    <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
      <Layers sx={{ fontSize: 20 }} />
      Mastra Core (src/mastra/)
    </CardTitle>
  </CardHeader>
  <CardContent>
    <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 2 }}>
      <Box>
        <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Agents (27+ specialized)</Typography>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5, fontSize: '0.875rem' } }}>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>27+ individual agents</Typography> - Governed RAG, research, content generation, financial analysis</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>3 agent networks</Typography> - Multi-agent orchestration (research-content, financial-team, governed-rag)</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>Custom scorers</Typography> - Quality evaluation for agent responses</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>5 capability domains</Typography> - Governed RAG, Deep Research, Financial Intelligence, Content Generation, Interactive State</li>
        </Box>
      </Box>
      <Box>
        <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Workflows (10+ orchestrated)</Typography>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5, fontSize: '0.875rem' } }}>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>governed-rag-answer.workflow.ts</Typography> - Secure Q&A pipeline</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>chatWorkflow.ts</Typography> - Interactive conversational workflows</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>financialAnalysisWorkflowV3.ts</Typography> - Advanced financial analysis</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>contentGenerationWorkflow.ts</Typography> - Multi-agent content creation</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>researchWorkflow.ts</Typography> - Deep research orchestration</li>
        </Box>
        <Typography sx={{ fontWeight: 'bold', mb: 1, mt: 2 }}>Tools (50+ capabilities)</Typography>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5, fontSize: '0.875rem' } }}>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>25+ web/data tools</Typography> - Scraping, APIs, search (Alpha Vantage, Polygon, Finnhub, SerpAPI)</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>10+ processing tools</Typography> - Document chunking, PDF conversion, evaluation, learning extraction</li>
          <li>• <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>MCP integration</Typography> - Model Context Protocol server</li>
        </Box>
      </Box>
    </Box>
    <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Services & Configuration</Typography>
    <Box sx={{ display: 'grid', gridTemplateColumns: { xs: 'repeat(2, 1fr)', md: 'repeat(3, 1fr)' }, gap: 1, fontSize: '0.875rem' }}>
      <div>• AuthenticationService</div>
      <div>• RoleService</div>
      <div>• ValidationService</div>
      <div>• VectorService</div>
      <div>• DocumentProcessorService</div>
      <div>• WorkflowDecorators</div>
      <div>• PgVector +  storage</div>
      <div>• Google Gemini AI models</div>
      <div>• JWT authentication</div>
      <div>• Structured logging</div>
    </Box>

  </CardContent>
</Card>

## Workflows

Mastra workflows define sequential steps combining agents, tools, and services. Ten main workflows handle the complete AI orchestration lifecycle and specialized tasks across all 5 capability domains.

<Tabs defaultValue="rag">
  <TabsList>
    <TabsTrigger value="rag">RAG Workflows</TabsTrigger>
    <TabsTrigger value="domain">Domain Workflows</TabsTrigger>
    <TabsTrigger value="content">Content Workflows</TabsTrigger>
    <TabsTrigger value="financial">Financial Workflows</TabsTrigger>
  </TabsList>

  <TabsContent value="rag">
    <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 3 }}>
      <Card variant="outlined">
        <CardHeader>
          <CardTitle>Governed RAG Answer Workflow</CardTitle>
          <CardDescription>Secure Q&A pipeline: Auth → Retrieve → Rerank → Answer → Verify</CardDescription>
        </CardHeader>
        <CardContent>
          <Box sx={{ mb: 2 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Process Flow:</Typography>
            <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              <strong>Input:</strong> <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>{"{jwt, question}"}</Typography><br/>
              <strong>Output:</strong> <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>{"{answer, citations}"}</Typography>
            </Box>
          </Box>
          <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Secure RAG Pipeline</Typography>
            <Mermaid chart={`flowchart TD
              A[User Query + JWT] --> B[JWT Validation]
              B --> C[Identity Agent]
              C --> D[Policy Agent]
              D --> E[Retrieve Agent]
              E --> F[Rerank Agent]
              F --> G[Answerer Agent]
              G --> H[Verifier Agent]
              H --> I[Final Response]
              B --> J[403: Access Denied]
              style A fill:#e3f2fd
              style C fill:#f3e5f5
              style G fill:#fff3e0
              style I fill:#e8f5e8
              style J fill:#ffebee`} />
          </Box>
        </CardContent>
      </Card>

      <Card variant="outlined">
        <CardHeader>
          <CardTitle>Governed RAG Index Workflow</CardTitle>
          <CardDescription>Document ingestion: Process → Chunk → Embed → Store with Security</CardDescription>
        </CardHeader>
        <CardContent>
          <Box sx={{ mb: 2 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 1 }}>Process Flow:</Typography>
            <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1, fontSize: '0.875rem' }}>
              <strong>Input:</strong> <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>{"{documents}"}</Typography><br/>
              <strong>Output:</strong> <Typography component="code" sx={{ bgcolor: 'background.surface', px: 0.5 }}>{"{indexed, failed}"}</Typography>
            </Box>
          </Box>
          <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Document Indexing Pipeline</Typography>
            <Mermaid chart={`flowchart TD
              A[Documents] --> B[Text Processing]
              B --> C[Security Classification]
              C --> D[Document Chunking]
              D --> E[Generate Embeddings]
              E --> F[Store with Access Control]
              F --> G[Index Complete]
              style A fill:#e3f2fd
              style B fill:#f3e5f5
              style D fill:#fff3e0
              style G fill:#e8f5e8`} />
          </Box>
        </CardContent>
      </Card>
    </Box>
  </TabsContent>

  <TabsContent value="domain">
    <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 3 }}>
      <Card variant="outlined">
        <CardHeader>
          <CardTitle>Chat Workflow</CardTitle>
          <CardDescription>Interactive conversational workflows with Cedar OS integration</CardDescription>
        </CardHeader>
        <CardContent>
          <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Interactive Chat Pipeline</Typography>
            <Mermaid chart={`flowchart TD
              A[User Message] --> B[Context Fetch]
              B --> C[Cedar State Subscription]
              C --> D[Agent Selection]
              D --> E[Workflow Execution]
              E --> F[Streaming Response]
              F --> G[State Updates]
              style A fill:#e3f2fd
              style C fill:#f3e5f5
              style E fill:#fff3e0
              style G fill:#e8f5e8`} />
          </Box>
        </CardContent>
      </Card>

      <Card variant="outlined">
        <CardHeader>
          <CardTitle>Research Workflow</CardTitle>
          <CardDescription>Multi-source research with approval gates and synthesis</CardDescription>
        </CardHeader>
        <CardContent>
          <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Research Orchestration</Typography>
            <Mermaid chart={`flowchart TD
              A[Research Query] --> B[Source Selection]
              B --> C[Parallel Research]
              C --> D[Quality Evaluation]
              D --> E[Result Synthesis]
              E --> F[Final Report]
              D --> G[Insufficient Quality]
              G --> H[Additional Research]
              H --> C
              style A fill:#e3f2fd
              style C fill:#f3e5f5
              style E fill:#fff3e0
              style F fill:#e8f5e8`} />
          </Box>
        </CardContent>
      </Card>
    </Box>
  </TabsContent>

  <TabsContent value="content">
    <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 3 }}>
      <Card variant="outlined">
        <CardHeader>
          <CardTitle>Content Generation Workflow</CardTitle>
          <CardDescription>End-to-end content creation: Research → Write → Edit → Evaluate</CardDescription>
        </CardHeader>
        <CardContent>
          <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Content Creation Pipeline</Typography>
            <Mermaid chart={`flowchart TD
              A[Content Brief] --> B[Research Agent]
              B --> C[Copywriter Agent]
              C --> D[Editor Agent]
              D --> E[Evaluation Agent]
              E --> F[Quality Approved]
              E --> G[Revision Needed]
              G --> D
              style A fill:#e3f2fd
              style B fill:#f3e5f5
              style D fill:#fff3e0
              style F fill:#e8f5e8`} />
          </Box>
        </CardContent>
      </Card>

      <Card variant="outlined">
        <CardHeader>
          <CardTitle>Report Generation Workflow</CardTitle>
          <CardDescription>Structured report creation with data analysis and formatting</CardDescription>
        </CardHeader>
        <CardContent>
          <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Report Generation Pipeline</Typography>
            <Mermaid chart={`flowchart TD
              A[Report Request] --> B[Data Gathering]
              B --> C[Analysis & Synthesis]
              C --> D[Content Structuring]
              D --> E[Formatting & Review]
              E --> F[Final Report]
              style A fill:#e3f2fd
              style B fill:#f3e5f5
              style D fill:#fff3e0
              style F fill:#e8f5e8`} />
          </Box>
        </CardContent>
      </Card>
    </Box>
  </TabsContent>

  <TabsContent value="financial">
    <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 3 }}>
      <Card variant="outlined">
        <CardHeader>
          <CardTitle>Financial Analysis Workflow V3</CardTitle>
          <CardDescription>Advanced concurrent financial analysis with market data integration</CardDescription>
        </CardHeader>
        <CardContent>
          <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Financial Analysis Pipeline</Typography>
            <Mermaid chart={`flowchart TD
              A[Symbol List] --> B[Concurrent Analysis]
              B --> C[Crypto Analysis Agent]
              B --> D[Stock Analysis Agent]
              B --> E[Market Data Tools]
              C --> F[Technical Indicators]
              D --> F
              E --> F
              F --> G[Market Education Agent]
              G --> H[Synthesis Report]
              style A fill:#e3f2fd
              style B fill:#f3e5f5
              style F fill:#fff3e0
              style H fill:#e8f5e8`} />
          </Box>
        </CardContent>
      </Card>

      <Card variant="outlined">
        <CardHeader>
          <CardTitle>Financial Analysis Workflow V2</CardTitle>
          <CardDescription>Batch processing for multiple financial instruments</CardDescription>
        </CardHeader>
        <CardContent>
          <Box sx={{ bgcolor: 'background.surface', p: 2, borderRadius: 1 }}>
            <Typography sx={{ fontWeight: 'bold', mb: 2 }}>Batch Financial Processing</Typography>
            <Mermaid chart={`flowchart TD
              A[Batch Request] --> B[Symbol Processing]
              B --> C[Data Retrieval]
              C --> D[Analysis per Symbol]
              D --> E[Result Aggregation]
              E --> F[Batch Complete]
              style A fill:#e3f2fd
              style B fill:#f3e5f5
              style D fill:#fff3e0
              style F fill:#e8f5e8`} />
          </Box>
        </CardContent>
      </Card>
    </Box>
  </TabsContent>
</Tabs>

## Agents & Tools

## Agents & Tools

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 2, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
        <Brain sx={{ fontSize: 20 }} />
        Specialized Agents (27+)
      </CardTitle>
      <CardDescription>LLM-powered specialists across 5 capability domains</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ mb: 2 }}>
        <Typography sx={{ fontWeight: 'bold', fontSize: '0.875rem', mb: 1 }}>Governed RAG Agents (6 core)</Typography>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="primary" sx={{ flexShrink: 0 }}>identity</Badge>
          <Typography level="body-sm"><strong>Identity Agent:</strong> JWT authentication & user validation</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="primary" sx={{ flexShrink: 0 }}>policy</Badge>
          <Typography level="body-sm"><strong>Policy Agent:</strong> Access control & security policy enforcement</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="primary" sx={{ flexShrink: 0 }}>retrieve</Badge>
          <Typography level="body-sm"><strong>Retrieve Agent:</strong> Vector search with security filters</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="primary" sx={{ flexShrink: 0 }}>rerank</Badge>
          <Typography level="body-sm"><strong>Rerank Agent:</strong> Relevance scoring and result reordering</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="primary" sx={{ flexShrink: 0 }}>answerer</Badge>
          <Typography level="body-sm"><strong>Answerer Agent:</strong> Response generation with citations</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="primary" sx={{ flexShrink: 0 }}>verifier</Badge>
          <Typography level="body-sm"><strong>Verifier Agent:</strong> Security compliance auditing</Typography>
        </Box>

        <Typography sx={{ fontWeight: 'bold', fontSize: '0.875rem', mb: 1, mt: 2 }}>Domain Agents (21+ specialized)</Typography>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="secondary" sx={{ flexShrink: 0 }}>research</Badge>
          <Typography level="body-sm"><strong>Research Agent:</strong> Multi-source research & analysis</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="secondary" sx={{ flexShrink: 0 }}>copywriter</Badge>
          <Typography level="body-sm"><strong>Copywriter Agent:</strong> Content creation & optimization</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="secondary" sx={{ flexShrink: 0 }}>editor</Badge>
          <Typography level="body-sm"><strong>Editor Agent:</strong> Content editing & refinement</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="secondary" sx={{ flexShrink: 0 }}>cryptoAnalysis</Badge>
          <Typography level="body-sm"><strong>Crypto Analysis:</strong> Cryptocurrency market analysis</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="secondary" sx={{ flexShrink: 0 }}>stockAnalysis</Badge>
          <Typography level="body-sm"><strong>Stock Analysis:</strong> Stock market analysis</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="secondary" sx={{ flexShrink: 0 }}>productRoadmap</Badge>
          <Typography level="body-sm"><strong>Product Roadmap:</strong> Product planning & roadmapping</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="secondary" sx={{ flexShrink: 0 }}>assistant</Badge>
          <Typography level="body-sm"><strong>Assistant Agent:</strong> General AI assistance</Typography>
        </Box>
        <Box sx={{ display: 'flex', alignItems: 'flex-start', gap: 2, mb: 1 }}>
          <Badge variant="soft" color="secondary" sx={{ flexShrink: 0 }}>evaluation</Badge>
          <Typography level="body-sm"><strong>Evaluation Agent:</strong> Quality assessment & scoring</Typography>
        </Box>
      </Box>
    </CardContent>
  </Card>

  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
        <Settings sx={{ fontSize: 20 }} />
        Core Tools (50+ capabilities)
      </CardTitle>
      <CardDescription>Reusable functions for agents across all domains</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ mb: 2 }}>
        <Typography sx={{ fontWeight: 'bold', fontSize: '0.875rem', mb: 1 }}>Web & Data Tools (25+)</Typography>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5, fontSize: '0.75rem' } }}>
          <li>• Alpha Vantage (crypto & stock APIs)</li>
          <li>• Polygon (financial market data)</li>
          <li>• Finnhub (financial analysis)</li>
          <li>• SerpAPI (Google search integration)</li>
          <li>• Web scraping & content extraction</li>
          <li>• PDF to markdown conversion</li>
        </Box>

        <Typography sx={{ fontWeight: 'bold', fontSize: '0.875rem', mb: 1, mt: 2 }}>Processing Tools (10+)</Typography>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5, fontSize: '0.75rem' } }}>
          <li>• Document chunking & embedding</li>
          <li>• Content evaluation & scoring</li>
          <li>• Learning extraction from content</li>
          <li>• Text processing & normalization</li>
          <li>• File operations & data handling</li>
        </Box>

        <Typography sx={{ fontWeight: 'bold', fontSize: '0.875rem', mb: 1, mt: 2 }}>Specialized Tools</Typography>
        <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 0.5, fontSize: '0.75rem' } }}>
          <li>• JWT authentication & validation</li>
          <li>• Vector query with security filters</li>
          <li>• Graph RAG & knowledge graphs</li>
          <li>• MCP (Model Context Protocol)</li>
          <li>• Database operations (PgVector, PostgreSQL)</li>
        </Box>
      </Box>
    </CardContent>

  </Card>
</Box>

## Data Flow Architecture

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ fontSize: '1.125rem' }}>Indexing Pipeline</CardTitle>
      <CardDescription>Document ingestion and vectorization</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'primary.main',
            color: 'primary.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>API</Box>
          <Typography level="body-sm">API/CLI</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'secondary.main',
            color: 'secondary.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>W</Box>
          <Typography level="body-sm">Workflow</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'success.main',
            color: 'success.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>S</Box>
          <Typography level="body-sm">Services</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'warning.main',
            color: 'warning.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>P</Box>
          <Typography level="body-sm">PgVector</Typography>
        </Box>
      </Box>
      <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
        Documents flow from API/CLI through workflows and services, ultimately stored as vectors with security metadata in PgVector.
      </Typography>
    </CardContent>
  </Card>

  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ fontSize: '1.125rem' }}>Query Pipeline</CardTitle>
      <CardDescription>Secure retrieval and response generation</CardDescription>
    </CardHeader>
    <CardContent>
      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'primary.main',
            color: 'primary.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>UI</Box>
          <Typography level="body-sm">UI/API</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'secondary.main',
            color: 'secondary.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>W</Box>
          <Typography level="body-sm">Workflow</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'warning.main',
            color: 'warning.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>A</Box>
          <Typography level="body-sm">Agents</Typography>
        </Box>
        <ArrowRight sx={{ fontSize: 16 }} />
        <Box sx={{ textAlign: 'center' }}>
          <Box sx={{
            bgcolor: 'success.main',
            color: 'success.contrastText',
            borderRadius: '50%',
            width: 48,
            height: 48,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            fontWeight: 'bold',
            mb: 1,
            mx: 'auto'
          }}>R</Box>
          <Typography level="body-sm">Response</Typography>
        </Box>
      </Box>
      <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
        Queries are authenticated, processed through agents with security filters, and return verified responses with citations.
      </Typography>
    </CardContent>
  </Card>
</Box>

## Security Integration

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' }, gap: 3, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
        <Shield sx={{ fontSize: 20 }} />
        Security at Retrieval
      </CardTitle>
    </CardHeader>
    <CardContent>
      <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 1.5, fontSize: '0.875rem' } }}>
        <li><strong>Access Filters:</strong> Applied during vector search</li>
        <li><strong>Classification Limits:</strong> User role determines max classification</li>
        <li><strong>Tag Matching:</strong> Security tags must match user permissions</li>
        <li><strong>Zero Results:</strong> "No authorized documents found" when filtered out</li>
      </Box>
    </CardContent>
  </Card>

  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>
        <CheckCircle sx={{ fontSize: 20 }} />
        Security at Verification
      </CardTitle>
    </CardHeader>
    <CardContent>
      <Box component="ul" sx={{ m: 0, pl: 2, '& li': { mb: 1.5, fontSize: '0.875rem' } }}>
        <li><strong>Policy Audit:</strong> AI agent checks for violations</li>
        <li><strong>Information Leakage:</strong> Prevents unauthorized data exposure</li>
        <li><strong>Citation Validation:</strong> Ensures citations match accessible docs</li>
        <li><strong>Compliance Check:</strong> Verifies adherence to security policies</li>
      </Box>
    </CardContent>
  </Card>
</Box>

## Logging & Monitoring

<Card variant="outlined" sx={{ mb: 3 }}>
    <CardHeader>
        <CardTitle sx={{ fontSize: '1.125rem' }}>
            Comprehensive Logging
        </CardTitle>
        <CardDescription>
            All workflow steps logged for audit and debugging
        </CardDescription>
    </CardHeader>
    <CardContent>
        <Box
            sx={{
                display: 'grid',
                gridTemplateColumns: { xs: '1fr', md: 'repeat(2, 1fr)' },
                gap: 3,
                mb: 2,
            }}
        >
            <Box>
                <Typography sx={{ fontWeight: 'bold', mb: 1 }}>
                    Application Logs
                </Typography>
                <Box
                    sx={{
                        bgcolor: 'background.surface',
                        p: 2,
                        borderRadius: 1,
                        fontSize: '0.875rem',
                    }}
                >
                    <Typography component="code" sx={{ fontSize: '0.75rem' }}>
                        logs/mastra.log
                    </Typography>
                    <br />
                    General application logging
                </Box>
            </Box>
            <Box>
                <Typography sx={{ fontWeight: 'bold', mb: 1 }}>
                    Workflow Logs
                </Typography>
                <Box
                    sx={{
                        bgcolor: 'background.surface',
                        p: 2,
                        borderRadius: 1,
                        fontSize: '0.875rem',
                    }}
                >
                    <Typography component="code" sx={{ fontSize: '0.75rem' }}>
                        logs/workflow.log
                    </Typography>
                    <br />
                    Detailed workflow execution logs
                </Box>
            </Box>
        </Box>
        <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
            All steps are logged using @mastra/loggers for complete audit
            trails, debugging, and compliance monitoring.
        </Typography>
    </CardContent>
</Card>

## Extensibility

<Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', md: 'repeat(3, 1fr)' }, gap: 2, mb: 3 }}>
  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ fontSize: '0.875rem' }}>Add Agents/Tools</CardTitle>
    </CardHeader>
    <CardContent>
      <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
        Extend Mastra config in <Typography component="code" sx={{ fontSize: '0.75rem' }}>src/mastra/index.ts</Typography> to add new specialized agents or reusable tools.
      </Typography>
    </CardContent>
  </Card>

<Card variant="outlined">
    <CardHeader>
        <CardTitle sx={{ fontSize: '0.875rem' }}>Custom Workflows</CardTitle>
    </CardHeader>
    <CardContent>
        <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
            Create new{' '}
            <Typography component="code" sx={{ fontSize: '0.75rem' }}>
                .workflow.ts
            </Typography>{' '}
            files to define custom processing pipelines and business logic.
        </Typography>
    </CardContent>
</Card>

  <Card variant="outlined">
    <CardHeader>
      <CardTitle sx={{ fontSize: '0.875rem' }}>Modular Services</CardTitle>
    </CardHeader>
    <CardContent>
      <Typography level="body-sm" sx={{ color: 'text.tertiary' }}>
        Services are modular and injectable via Mastra context, making them easy to extend or replace.
      </Typography>
    </CardContent>
  </Card>
</Box>

<div className="flex gap-4">
    <Button asChild>
        <a href="/docs/demo-roles">
            <Users className="h-4 w-4 mr-2" />
            Demo Roles
            <ArrowRight className="h-4 w-4 ml-2" />
        </a>
    </Button>
    <Button variant="outline" asChild>
        <a href="/docs/api-reference">
            <FileText className="h-4 w-4 mr-2" />
            API Reference
        </a>
    </Button>
</div>
